(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{135:function(e,t,a){e.exports=a(266)},169:function(e,t){},171:function(e,t){},209:function(e,t){},210:function(e,t){},266:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),c=a(24),r=a(13),l=a(26),s=a(134),m=a(125),i=a(126),u=a(6),d=function(){function e(){Object(m.a)(this,e),this.counter=0,this.start=new Date}return Object(i.a)(e,[{key:"increment",value:function(){return this.counter++,this.counter}},{key:"decrement",value:function(){return this.counter--,this.counter}},{key:"elapsedTime",get:function(){return this.current-this.start+"milliseconds"}}]),e}();Object(u.h)(d,{counter:u.m,elapsedTime:u.e,increment:u.d.bound,decrement:u.d.bound});var p={sampleStore:new d},E=a(48),f=a.n(E),b=function(e){if("undefined"!==window)return f.a.get(e)},h=function(e,t){var a,n;console.log("AUTHENTICATE HELPER ON SIGNIN RESPONSE",e),a="token",n=e.data.token,"undefined"!==window&&f.a.set(a,n,{expires:1}),function(e,t){"undefined"!==window&&localStorage.setItem(e,JSON.stringify(t))}("user",e.data.user),t()},g=function(){if("undefined"!==window){var e=b("token"),t=localStorage.getItem("user");return!(!e||!t)&&JSON.parse(t)}},N=function(e){var t;t="token","undefined"!==window&&f.a.remove(t,{expires:1}),function(e){"undefined"!==window&&localStorage.removeItem(e)}("user"),e()},v=function(e,t){if(console.log("UPDATE USER IN LOCALSTORAGE HELPERS",e),"undefined"!==typeof window){var a=JSON.parse(localStorage.getItem("user"));a=e.data,localStorage.setItem("user",JSON.stringify(a))}t()},O=Object(l.g)((function(e){var t=e.children,a=e.match,c=e.history,l=function(e){return a.path===e?{color:"#000"}:{color:"#fff"}};return o.a.createElement(n.Fragment,null,o.a.createElement("ul",{className:"nav nav-tabs bg-primary"},o.a.createElement("li",{className:"nav-item"},o.a.createElement(r.b,{to:"/",className:"nav-link",style:l("/")},"Home")),!g()&&o.a.createElement(n.Fragment,null,o.a.createElement("li",{className:"nav-item"},o.a.createElement(r.b,{to:"/signin",className:"nav-link",style:l("/signin")},"Sign In")),o.a.createElement("li",{className:"nav-item"},o.a.createElement(r.b,{to:"/signup",className:"nav-link",style:l("/signup")},"Sign Up"))),g()&&"admin"===g().role&&o.a.createElement("li",{className:"nav-item"},o.a.createElement(r.b,{className:"nav-link",style:l("/admin"),to:"/admin"},g().name)),g()&&"subscriber"===g().role&&o.a.createElement("li",{className:"nav-item"},o.a.createElement(r.b,{className:"nav-link",style:l("/private"),to:"/private"},g().name)),g()&&o.a.createElement("li",{className:"nav-item"},o.a.createElement("span",{className:"nav-link",style:{cursor:"pointer",color:"#fff"},onClick:function(){N((function(){c.push("/")}))}},"Sign Out"))),o.a.createElement("div",{className:"container"},t))})),S=a(129),T=function(){return o.a.createElement(O,null,o.a.createElement(S.Helmet,null,o.a.createElement("meta",{charSet:"utf-8"}),o.a.createElement("title",null,"MERN Stack"),o.a.createElement("link",{rel:"canonical",href:"https://mern-stack.com"})),o.a.createElement("div",{className:"col-md-6 offset-md-3 text-center"},o.a.createElement("h1",{className:"p-5"},"MERN Stack Authentication Boilerplate"),o.a.createElement("hr",null),o.a.createElement("p",{className:"lead"},"MERN stack login registration system with email account activation, forgot password, reset password, login with facebook and google, and private and protected routes for authenticated users and admin users.")))},w=a(20),x=a(4),R=a(12),P=a(10),j=a.n(P),k=a(7),y=a(130),I=a.n(y),C=function(e){var t=e.text,a=e.informParent,n=void 0===a?function(e){return e}:a,c=function(e){j()({method:"POST",url:"".concat("http://localhost:8000/api","/google-login"),data:{idToken:e.tokenId}}).then((function(e){console.log("GOOGLE SIGNIN SUCCESS",e),n(e)})).catch((function(e){console.log("GOOGLE SIGNIN ERROR",e.response)}))};return o.a.createElement("div",{className:"pb-3"},o.a.createElement(I.a,{clientId:"".concat("834937944777-31gcviqjpv5ammhgtticl9c75tce07ps.apps.googleusercontent.com"),onSuccess:c,onFailure:c,render:function(e){return o.a.createElement("button",{onClick:e.onClick,disabled:e.disabled,className:"btn btn-danger btn-lg btn-block"},o.a.createElement("i",{className:"fab fa-google pr-2"})," ",t)},cookiePolicy:"single_host_origin"}))},A=a(131),U=a.n(A),D=function(e){var t=e.text,a=e.informParent,n=void 0===a?function(e){return e}:a;return o.a.createElement("div",{className:"pb-3"},o.a.createElement(U.a,{appId:"".concat("178544186842859"),autoLoad:!1,callback:function(e){console.log(e),j()({method:"POST",url:"".concat("http://localhost:8000/api","/facebook-login"),data:{userID:e.userID,accessToken:e.accessToken}}).then((function(e){console.log("FACEBOOK SIGNIN SUCCESS",e),n(e)})).catch((function(e){console.log("FACEBOOK SIGNIN ERROR",e.response)}))},render:function(e){return o.a.createElement("button",{onClick:e.onClick,className:"btn btn-primary btn-lg btn-block"},o.a.createElement("i",{className:"fab fa-facebook pr-2"})," ",t)}}))},F=(a(27),function(e){var t=e.history,a=Object(n.useState)({name:"",email:"",password:"",buttonText:"Submit"}),c=Object(R.a)(a,2),s=c[0],m=c[1],i=s.name,u=s.email,d=s.password,p=s.buttonText,E=function(e){return function(t){m(Object(x.a)({},s,Object(w.a)({},e,t.target.value)))}},f=function(e){h(e,(function(){g()&&"admin"===g().role?t.push("/admin"):t.push("/private")}))},b=function(e){e.preventDefault(),m(Object(x.a)({},s,{buttonText:"Submitting"})),j()({method:"POST",url:"".concat("http://localhost:8000/api","/signup"),data:{name:i,email:u,password:d}}).then((function(e){console.log("SIGNUP SUCCESS",e),m(Object(x.a)({},s,{name:"",email:"",password:"",buttonText:"Submitted"})),k.b.success(e.data.message)})).catch((function(e){console.log("SIGNUP ERROR",e.response.data),m(Object(x.a)({},s,{buttonText:"Submit"})),k.b.error(e.response.data.error)}))};return o.a.createElement(O,null,o.a.createElement("div",{className:"col-md-6 offset-md-3"},o.a.createElement(k.a,null),g()?o.a.createElement(l.a,{to:"/"}):null,o.a.createElement("h1",{className:"p-5 text-center"},"Sign Up"),o.a.createElement(C,{text:"Sign Up with Google",informParent:f}),o.a.createElement(D,{text:"Sign Up with Facebook",informParent:f}),o.a.createElement("form",null,o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{className:"text-muted"},"Name"),o.a.createElement("input",{onChange:E("name"),value:i,type:"text",className:"form-control"})),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{className:"text-muted"},"Email"),o.a.createElement("input",{onChange:E("email"),value:u,type:"email",className:"form-control"})),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{className:"text-muted"},"Password"),o.a.createElement("input",{onChange:E("password"),value:d,type:"password",className:"form-control"})),o.a.createElement("div",null,o.a.createElement("button",{className:"btn btn-primary",onClick:b},p))),o.a.createElement("br",null),o.a.createElement(r.b,{to:"/auth/password/forgot",className:"btn btn-sm btn-outline-danger"},"Forgot Password")))}),G=function(e){var t=e.history,a=Object(n.useState)({email:"",password:"",buttonText:"Submit"}),c=Object(R.a)(a,2),s=c[0],m=c[1],i=s.email,u=s.password,d=s.buttonText,p=function(e){return function(t){m(Object(x.a)({},s,Object(w.a)({},e,t.target.value)))}},E=function(e){h(e,(function(){g()&&"admin"===g().role?t.push("/admin"):t.push("/private")}))},f=function(e){e.preventDefault(),m(Object(x.a)({},s,{buttonText:"Submitting"})),j()({method:"POST",url:"".concat("http://localhost:8000/api","/signin"),data:{email:i,password:u}}).then((function(e){console.log("SIGNIN SUCCESS",e),h(e,(function(){m(Object(x.a)({},s,{name:"",email:"",password:"",buttonText:"Submitted"})),g()&&"admin"===g().role?t.push("/admin"):t.push("/private")}))})).catch((function(e){console.log("SIGNIN ERROR",e.response.data),m(Object(x.a)({},s,{buttonText:"Submit"})),k.b.error(e.response.data.error)}))};return o.a.createElement(O,null,o.a.createElement("div",{className:"col-md-6 offset-md-3"},o.a.createElement(k.a,null),g()?o.a.createElement(l.a,{to:"/"}):null,o.a.createElement("h1",{className:"p-5 text-center"},"Sign In"),o.a.createElement(C,{text:"Login with Google",informParent:E}),o.a.createElement(D,{text:"Login with Facebook",informParent:E}),o.a.createElement("form",null,o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{className:"text-muted"},"Email"),o.a.createElement("input",{onChange:p("email"),value:i,type:"email",className:"form-control"})),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{className:"text-muted"},"Password"),o.a.createElement("input",{onChange:p("password"),value:u,type:"password",className:"form-control"})),o.a.createElement("div",null,o.a.createElement("button",{className:"btn btn-primary",onClick:f},d))),o.a.createElement("br",null),o.a.createElement(r.b,{to:"/auth/password/forgot",className:"btn btn-sm btn-outline-danger"},"Forgot Password")))},L=a(46),V=a.n(L),B=function(e){var t=e.match,a=Object(n.useState)({name:"",activateToken:"",show:!0}),c=Object(R.a)(a,2),r=c[0],l=c[1];Object(n.useEffect)((function(){var e=t.params.activateToken,a=V.a.decode(e);if(e&&a){var n=a.name;l(Object(x.a)({},r,{name:n,activateToken:e}))}}),[t]);var s=r.name,m=r.activateToken,i=function(e){e.preventDefault(),j()({method:"POST",url:"".concat("http://localhost:8000/api","/account-activation"),data:{token:m}}).then((function(e){console.log("ACCOUNT ACTIVATION",e),l(Object(x.a)({},r,{show:!1})),k.b.success(e.data.message)})).catch((function(e){console.log("ACCOUNT ACTIVATION ERROR",e.response.data.error),k.b.error(e.response.data.error)}))};return o.a.createElement(O,null,o.a.createElement("div",{className:"col-md-6 offset-md-3"},o.a.createElement(k.a,null),!s&&o.a.createElement("h1",{className:"p-5 text-center"},"Account Activation Failed"),s&&o.a.createElement("div",{className:"text-center"},o.a.createElement("h1",{className:"p-5"},"Hey ",s,", Ready to activate your account?"),o.a.createElement("button",{className:"btn btn-outline-primary",onClick:i},"Activate Account"))))},H=function(e){var t=e.history,a=Object(n.useState)({role:"",name:"",email:"",password:"",buttonText:"Submit"}),c=Object(R.a)(a,2),r=c[0],l=c[1],s=b("token");Object(n.useEffect)((function(){m()}),[]);var m=function(){j()({method:"GET",url:"".concat("http://localhost:8000/api","/user"),headers:{Authorization:"Bearer ".concat(s)}}).then((function(e){console.log("PRIVATE PROFILE UPDATE",e);var t=e.data,a=t.role,n=t.name,o=t.email;l(Object(x.a)({},r,{role:a,name:n,email:o}))})).catch((function(e){console.log("PRIVATE PROFILE UPDATE ERROR",e.response.data.error),401===e.response.status&&N((function(){t.push("/")}))}))},i=r.role,u=r.name,d=r.email,p=r.password,E=r.buttonText,f=function(e){return function(t){l(Object(x.a)({},r,Object(w.a)({},e,t.target.value)))}},h=function(e){e.preventDefault(),l(Object(x.a)({},r,{buttonText:"Submitting"})),j()({method:"PUT",url:"".concat("http://localhost:8000/api","/user/update"),headers:{Authorization:"Bearer ".concat(s)},data:{name:u,password:p}}).then((function(e){console.log("PRIVATE PROFILE UPDATE SUCCESS",e),v(e,(function(){l(Object(x.a)({},r,{buttonText:"Submitted"})),k.b.success("Profile updated successfully")}))})).catch((function(e){console.log("PRIVATE PROFILE UPDATE ERROR",e.response.data.error),l(Object(x.a)({},r,{buttonText:"Submit"})),k.b.error(e.response.data.error)}))};return o.a.createElement(O,null,o.a.createElement("div",{className:"col-md-6 offset-md-3"},o.a.createElement(k.a,null),o.a.createElement("h1",{className:"pt-5 text-center"},"Private"),o.a.createElement("p",{className:"lead text-center"},"Profile update"),o.a.createElement("form",null,o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{className:"text-muted"},"Role"),o.a.createElement("input",{defaultValue:i,type:"text",className:"form-control",disabled:!0})),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{className:"text-muted"},"Name"),o.a.createElement("input",{onChange:f("name"),value:u,type:"text",className:"form-control"})),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{className:"text-muted"},"Email"),o.a.createElement("input",{defaultValue:d,type:"email",className:"form-control",disabled:!0})),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{className:"text-muted"},"Password"),o.a.createElement("input",{onChange:f("password"),value:p,type:"password",className:"form-control"})),o.a.createElement("div",null,o.a.createElement("button",{className:"btn btn-primary",onClick:h},E)))))},J=function(e){var t=e.history,a=Object(n.useState)({role:"",name:"",email:"",password:"",buttonText:"Submit"}),c=Object(R.a)(a,2),r=c[0],l=c[1],s=b("token");Object(n.useEffect)((function(){m()}),[]);var m=function(){j()({method:"GET",url:"".concat("http://localhost:8000/api","/user"),headers:{Authorization:"Bearer ".concat(s)}}).then((function(e){console.log("PRIVATE PROFILE UPDATE",e);var t=e.data,a=t.role,n=t.name,o=t.email;l(Object(x.a)({},r,{role:a,name:n,email:o}))})).catch((function(e){console.log("PRIVATE PROFILE UPDATE ERROR",e.response.data.error),401===e.response.status&&N((function(){t.push("/")}))}))},i=r.role,u=r.name,d=r.email,p=r.password,E=r.buttonText,f=function(e){return function(t){l(Object(x.a)({},r,Object(w.a)({},e,t.target.value)))}},h=function(e){e.preventDefault(),l(Object(x.a)({},r,{buttonText:"Submitting"})),j()({method:"PUT",url:"".concat("http://localhost:8000/api","/admin/update"),headers:{Authorization:"Bearer ".concat(s)},data:{name:u,password:p}}).then((function(e){console.log("PRIVATE PROFILE UPDATE SUCCESS",e),v(e,(function(){l(Object(x.a)({},r,{buttonText:"Submitted"})),k.b.success("Profile updated successfully")}))})).catch((function(e){console.log("PRIVATE PROFILE UPDATE ERROR",e.response.data.error),l(Object(x.a)({},r,{buttonText:"Submit"})),k.b.error(e.response.data.error)}))};return o.a.createElement(O,null,o.a.createElement("div",{className:"col-md-6 offset-md-3"},o.a.createElement(k.a,null),o.a.createElement("h1",{className:"pt-5 text-center"},"Admin"),o.a.createElement("p",{className:"lead text-center"},"Profile update"),o.a.createElement("form",null,o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{className:"text-muted"},"Role"),o.a.createElement("input",{defaultValue:i,type:"text",className:"form-control",disabled:!0})),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{className:"text-muted"},"Name"),o.a.createElement("input",{onChange:f("name"),value:u,type:"text",className:"form-control"})),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{className:"text-muted"},"Email"),o.a.createElement("input",{defaultValue:d,type:"email",className:"form-control",disabled:!0})),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{className:"text-muted"},"Password"),o.a.createElement("input",{onChange:f("password"),value:p,type:"password",className:"form-control"})),o.a.createElement("div",null,o.a.createElement("button",{className:"btn btn-primary",onClick:h},E)))))},q=a(47),z=function(e){var t=e.component,a=Object(q.a)(e,["component"]);return o.a.createElement(l.b,Object.assign({},a,{render:function(e){return g()?o.a.createElement(t,e):o.a.createElement(l.a,{to:{pathname:"/signin",state:{from:e.location}}})}}))},W=function(e){var t=e.component,a=Object(q.a)(e,["component"]);return o.a.createElement(l.b,Object.assign({},a,{render:function(e){return g()&&"admin"===g().role?o.a.createElement(t,e):o.a.createElement(l.a,{to:{pathname:"/signin",state:{from:e.location}}})}}))},M=function(e){var t=e.history,a=Object(n.useState)({email:"",buttonText:"Request password reset link",success:!1}),c=Object(R.a)(a,2),r=c[0],l=c[1],s=r.email,m=r.buttonText,i=function(e){e.preventDefault(),r.success?t.push("/signin"):(l(Object(x.a)({},r,{buttonText:"Submitting"})),j()({method:"PUT",url:"".concat("http://localhost:8000/api","/forgot-password"),data:{email:s}}).then((function(e){console.log("FORGOT PASSWORD SUCCESS",e),k.b.success(e.data.message),l(Object(x.a)({},r,{buttonText:"Requested",success:!0}))})).catch((function(e){console.log("FORGOT PASSWORD ERROR",e.response.data),k.b.error(e.response.data.error),l(Object(x.a)({},r,{buttonText:"Request password reset link"}))})))};return o.a.createElement(O,null,o.a.createElement("div",{className:"col-md-6 offset-md-3"},o.a.createElement(k.a,null),o.a.createElement("h1",{className:"p-5 text-center"},"Forgot password"),function(){return o.a.createElement("form",null,o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{className:"text-muted"},"Email"),o.a.createElement("input",{onChange:(e="email",function(t){l(Object(x.a)({},r,Object(w.a)({},e,t.target.value)))}),value:s,type:"email",className:"form-control"})),o.a.createElement("div",null,o.a.createElement("button",{className:"btn btn-primary",onClick:i},m)));var e}()))},K=function(e){var t=e.history,a=e.match,c=Object(n.useState)({name:"",resetPasswordToken:"",resetSuccess:!1,newPassword:"",buttonText:"Reset password"}),r=Object(R.a)(c,2),l=r[0],s=r[1];Object(n.useEffect)((function(){var e=a.params.resetPasswordToken,t=V.a.decode(e);if(e&&t){var n=t.name;s(Object(x.a)({},l,{name:n,resetPasswordToken:e}))}}),[a]);var m=l.name,i=l.resetPasswordToken,u=l.newPassword,d=l.buttonText,p=function(e){s(Object(x.a)({},l,{newPassword:e.target.value}))},E=function(e){e.preventDefault(),l.resetSuccess?t.push("/signin"):(s(Object(x.a)({},l,{buttonText:"Submitting"})),j()({method:"PUT",url:"".concat("http://localhost:8000/api","/reset-password"),data:{newPassword:u,resetPasswordLink:i}}).then((function(e){console.log("RESET PASSWORD SUCCESS",e),k.b.success(e.data.message),s(Object(x.a)({},l,{buttonText:"Done",resetSuccess:!0}))})).catch((function(e){console.log("RESET PASSWORD ERROR",e.response.data),k.b.error(e.response.data.error),s(Object(x.a)({},l,{buttonText:"Reset password"}))})))};return o.a.createElement(O,null,o.a.createElement("div",{className:"col-md-6 offset-md-3"},o.a.createElement(k.a,null),!m&&o.a.createElement("h1",{className:"p-5 text-center"},"Pasword Reset Failed"),m&&o.a.createElement("h1",{className:"p-5 text-center"},"Hey ",m,", Type your new password"),m&&o.a.createElement("form",null,o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{className:"text-muted"},"Email"),o.a.createElement("input",{onChange:p,value:u,type:"password",className:"form-control",placeholder:"Type new password",required:!0})),o.a.createElement("div",null,o.a.createElement("button",{className:"btn btn-primary",onClick:E},d)))))},_=function(){return o.a.createElement(s.a,p,o.a.createElement(r.a,null,o.a.createElement(l.d,null,o.a.createElement(l.b,{path:"/",exact:!0,component:T}),o.a.createElement(l.b,{path:"/signup",exact:!0,component:F}),o.a.createElement(l.b,{path:"/signin",exact:!0,component:G}),o.a.createElement(l.b,{path:"/auth/activate/:activateToken",exact:!0,component:B}),o.a.createElement(z,{path:"/private",exact:!0,component:H}),o.a.createElement(W,{path:"/admin",exact:!0,component:J}),o.a.createElement(l.b,{path:"/auth/password/forgot",exact:!0,component:M}),o.a.createElement(l.b,{path:"/auth/password/reset/:resetPasswordToken",exact:!0,component:K}))))},Q=document.getElementById("root");Q.hasChildNodes()?Object(c.hydrate)(o.a.createElement(_,null),Q):Object(c.render)(o.a.createElement(_,null),Q)}},[[135,1,2]]]);
//# sourceMappingURL=main.63bc0db3.chunk.js.map